#!/bin/bash

eval_remote() {
    local URL="$1"
    eval "$(curl --proto '=https' -sSf "$URL")"
}

ROOT_DIR="https://raw.githubusercontent.com/skeletony007/charon/main"
BASH_UTILS_DIR="https://raw.githubusercontent.com/skeletony007/bash-utils/main"

eval_remote "$BASH_UTILS_DIR/object/object"

action=$1

case $action in
    install|uninstall)
        shift
        programs="$@"
        for program in "$programs"; do
            ferry="$(curl "$ROOT_DIR/ferries/$program")"
            create_object $program "$ferry"
            ${$program}_${action}
        done
    ;;
    --help|-h)
        echo "$(eval_remote "$ROOT_DIR/usage")"
    ;;
    *)
        echo "Invalid command or missing arguments. Use 'charon --help' for usage instructions."
    ;;
esac

